# نمط Decorator

## الدور (Role)

نمط Decorator يوفر طريقة لإضافة حالة وسلوك جديدين إلى كائن ديناميكيًا. النقطة الأساسية في تطبيق هذا النمط هي أن الـ Decorators يرثون الفئة الأصلية ويحتوون على نسخة منها.

## التوضيح (Illustration)

يأخذ نمط Decorator كائنًا موجودًا ويضيف إليه. على سبيل المثال، هناك طرق عديدة لإضافة تأثيرات إلى صورة، مثل وضع إطار حولها أو تحديد علامات (tags) تتعلق بالمحتوى. يمكن عرض هذه الإضافات فوق الصورة.

## التصميم (Design)

اللاعبون الأساسيون في هذا النمط هم:

*   **Component**: فئة أصلية من الكائنات التي يمكن إضافة عمليات إليها أو تعديلها.
*   **Operation**: عملية في كائنات IComponent يمكن استبدالها.
*   **IComponent**: الواجهة التي تحدد فئات الكائنات التي يمكن تزيينها (Component هي إحدى هذه الفئات).
*   **Decorator**: فئة تتوافق مع واجهة IComponent وتضيف حالة و/أو سلوكًا.

تتضمن فئة Decorator نوعين من العلاقات مع واجهة IComponent:

*   **علاقة "Is-a"**: يظهر بسهم منقط من Decorator إلى IComponent، مما يشير إلى أن Decorator يحقق واجهة IComponent. هذا يعني أنه يمكن استخدام كائنات Decorator حيثما يتوقع وجود كائنات IComponent.
*   **علاقة "Has-a"**: يظهر بماس مفتوح على Decorator، مرتبط بـ IComponent. يشير هذا إلى أن Decorator يقوم بإنشاء نسخة واحدة أو أكثر من كائنات IComponent، وأن الكائنات المزينة يمكن أن تستمر بعد الكائنات الأصلية. يستخدم Decorator السمة `component` (من نوع IComponent) لاستدعاء أي عملية استبدال قد يرغب في تجاوزها. هذه هي الطريقة التي يحقق بها نمط Decorator هدفه.

## تطبيقات متعددة (Multiple Applications)

*   **مكونات متعددة**: يمكن تزيين مكونات مختلفة تتوافق مع الواجهة. على سبيل المثال، يمكن أن تكون لدينا فئة ترسم أشخاصًا، منازل، سفن، وما إلى ذلك من أشكال وخطوط بسيطة. يمكن أيضًا وضع علامات عليها. لهذا السبب، تعد واجهة IComponent مهمة، حتى لو لم تحتوي على أي عمليات.
*   **Decorators متعددة**: يمكننا إنشاء أنواع أخرى من الـ Decorators، مثل Decorators الحدود أو حتى Decorators التي تجعل الصورة غير مرئية. بغض النظر عن ماهية الـ Decorators، يحتوي كل منها على كائن مكون، والذي قد يكون هو نفسه Decorator، مما يؤدي إلى سلسلة من التغييرات.
*   **عمليات متعددة**: يركز التوضيح على الرسم كعملية رئيسية للصور والزخارف. أمثلة أخرى ستوفر المزيد من العمليات الاختيارية. بعض هذه العمليات ستكون جزءًا من المكون الأصلي وواجهته، بينما سيتم إضافة بعضها كسلوكيات في Decorators معينة فقط. يمكن للعميل استدعاء أي من العمليات بشكل فردي على أي من المكونات (المزينة أو غير المزينة) التي لديه حق الوصول إليها.

## التنفيذ (Implementation)

الميزة الرئيسية لنمط Decorator هي أنه لا يعتمد على الوراثة لتوسيع السلوك. إذا كان على فئة `Tag` أن ترث من فئة `Photo` لإضافة طريقة أو طريقتين، فإن `Tags` ستحمل كل ما يتعلق بـ `Photos` معها، مما يجعلها كائنات ثقيلة جدًا. بدلاً من ذلك، فإن جعل فئة `Tag` تنفذ واجهة `Photo` ثم تضيف سلوكًا يحافظ على كائنات `Tag` خفيفة الوزن. يمكنها:

*   تنفيذ أي طرق في الواجهة، وتغيير السلوك الأولي للمكون.
*   إضافة أي حالة وسلوك جديدين.
*   الوصول إلى أي أعضاء عامين عبر الكائن الذي تم تمريره عند الإنشاء.

<!-- شرح مُعد بواسطة AI بناءً على المحاضرة: AdvProg2.ppt -->



## مخطط UML

![مخطط UML لنمط Decorator](/home/ubuntu/explanations/assets/decorator_uml.png)


