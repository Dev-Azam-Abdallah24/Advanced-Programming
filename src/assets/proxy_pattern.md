# نمط Proxy

## الدور (Role)

يدعم نمط Proxy الكائنات التي تتحكم في إنشاء الكائنات الأخرى والوصول إليها. غالبًا ما يكون الوكيل (Proxy) كائنًا صغيرًا (عامًا) يحل محل كائن أكثر تعقيدًا (خاصًا) يتم تنشيطه بمجرد وضوح ظروف معينة.

## التوضيح (Illustration)

ظاهرة رئيسية في العالم اليوم هي تزايد شعبية أنظمة الشبكات المجتمعية. يمكن استخدام نمط الوكيل في هذه الأنظمة للتحكم في الوصول إلى الموارد أو تأخير إنشاء الكائنات الثقيلة.

## التصميم (Design)

اللاعبون في هذا النمط هم:

1.  **ISubject**: واجهة مشتركة للمواضيع (Subjects) والوكلاء (Proxies) تمكنهم من الاستخدام بالتبادل.
2.  **Subject**: الفئة التي يمثلها الوكيل.
3.  **Proxy**: فئة تقوم بإنشاء، والتحكم في، وتحسين، وتوثيق الوصول إلى Subject.
4.  **Request**: عملية على Subject يتم توجيهها عبر وكيل.

تنفذ الفئة المركزية، Proxy، واجهة ISubject. يمكن للعميل استخدام ISubject لتجريد نفسه من الوكلاء. يحتفظ كل كائن Proxy بمرجع إلى Subject، حيث يحدث الإجراء بالفعل. يقوم الوكيل بالعمل الأمامي. يمكن تعزيز قيمته بجعل Subject فئة خاصة بحيث لا يمكن للعميل الوصول إلى Subject إلا عبر الوكيل.

## أنواع الوكلاء (Types of Proxies)

هناك عدة أنواع من الوكلاء:

1.  **الوكلاء الافتراضيون (Virtual proxies)**: يسلمون إنشاء كائن إلى كائن آخر (مفيد إذا كانت عملية الإنشاء قد تكون بطيئة أو قد تثبت أنها غير ضرورية).
2.  **وكلاء المصادقة (Authentication proxies)**: يتحققون من صحة أذونات الوصول لطلب ما.
3.  **الوكلاء عن بعد (Remote proxies)**: يقومون بترميز الطلبات وإرسالها عبر الشبكة.
4.  **الوكلاء الذكيون (Smart proxies)**: يضيفون إلى الطلبات أو يغيرونها قبل إرسالها.

ضمن نطاق نظام الشبكات الاجتماعية المذكور سابقًا، تتوافق هذه الأنواع على النحو التالي:

*   تأخير إنشاء بيئة غنية (وكيل افتراضي).
*   تسجيل دخول المستخدمين (وكيل مصادقة).
*   إرسال الطلبات عبر الشبكة (وكيل عن بعد).
*   تنفيذ الإجراءات على كتب الأصدقاء (وكيل ذكي).

## التنفيذ (Implementation)

الصفوف والكائنات المشاركة في هذا النمط هي:

*   **Proxy (MathProxy)**:
    *   يحتفظ بمرجع يسمح للوكيل بالوصول إلى الموضوع الحقيقي. قد يشير الوكيل إلى Subject إذا كانت واجهات RealSubject و Subject هي نفسها.
    *   يوفر واجهة مطابقة لواجهة Subject بحيث يمكن استبدال الوكيل بالموضوع الحقيقي.
    *   يتحكم في الوصول إلى الموضوع الحقيقي وقد يكون مسؤولاً عن إنشائه وحذفه.
    *   تعتمد المسؤوليات الأخرى على نوع الوكيل:
        *   **الوكلاء عن بعد (remote proxies)**: مسؤولون عن ترميز الطلب وحججه وإرسال الطلب المرمز إلى الموضوع الحقيقي في مساحة عنوان مختلفة.
        *   **الوكلاء الافتراضيون (virtual proxies)**: قد يقومون بتخزين معلومات إضافية حول الموضوع الحقيقي حتى يتمكنوا من تأجيل الوصول إليه. على سبيل المثال، يقوم ImageProxy من Motivation بتخزين مدى الصور الحقيقية مؤقتًا.
        *   **وكلاء الحماية (protection proxies)**: يتحققون من أن المتصل لديه أذونات الوصول المطلوبة لتنفيذ طلب.
*   **Subject (IMath)**: يحدد الواجهة المشتركة لـ RealSubject و Proxy بحيث يمكن استخدام Proxy في أي مكان يتوقع فيه RealSubject.
*   **RealSubject (Math)**: يحدد الكائن الحقيقي الذي يمثله الوكيل.

<!-- شرح مُعد بواسطة AI بناءً على المحاضرة: AdvProg2.ppt -->



## مخطط UML

![مخطط UML لنمط Proxy](/home/ubuntu/explanations/assets/proxy_uml.png)


